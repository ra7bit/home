CREATE TABLE city (id INT UNSIGNED AUTO_INCREMENT, name VARCHAR(100) NOT NULL, active TINYINT UNSIGNED DEFAULT '1' NOT NULL, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE classify (id INT UNSIGNED AUTO_INCREMENT, name VARCHAR(100) NOT NULL, active TINYINT UNSIGNED DEFAULT '1' NOT NULL, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE picture (id INT UNSIGNED AUTO_INCREMENT, name TEXT NOT NULL, src TEXT NOT NULL, isidea TINYINT UNSIGNED DEFAULT '0' NOT NULL, classify_id INT UNSIGNED NOT NULL, style_id INT UNSIGNED NOT NULL, city_id INT UNSIGNED NOT NULL, active TINYINT UNSIGNED DEFAULT '1' NOT NULL, INDEX city_id_idx (city_id), INDEX style_id_idx (style_id), INDEX classify_id_idx (classify_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE style (id INT UNSIGNED AUTO_INCREMENT, name TEXT NOT NULL, active TINYINT UNSIGNED DEFAULT '1' NOT NULL, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE user (id INT UNSIGNED AUTO_INCREMENT, name VARCHAR(100) NOT NULL, email VARCHAR(100) NOT NULL, password VARCHAR(100) NOT NULL, active TINYINT UNSIGNED DEFAULT '1' NOT NULL, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE user_picture (id INT UNSIGNED AUTO_INCREMENT, user_id INT UNSIGNED NOT NULL, picture_id INT UNSIGNED NOT NULL, action VARCHAR(100) DEFAULT 'share' NOT NULL, INDEX user_id_idx (user_id), INDEX picture_id_idx (picture_id), PRIMARY KEY(id)) ENGINE = INNODB;
ALTER TABLE picture ADD CONSTRAINT picture_style_id_style_id FOREIGN KEY (style_id) REFERENCES style(id);
ALTER TABLE picture ADD CONSTRAINT picture_classify_id_classify_id FOREIGN KEY (classify_id) REFERENCES classify(id);
ALTER TABLE picture ADD CONSTRAINT picture_city_id_city_id FOREIGN KEY (city_id) REFERENCES city(id);
ALTER TABLE user_picture ADD CONSTRAINT user_picture_user_id_user_id FOREIGN KEY (user_id) REFERENCES user(id);
ALTER TABLE user_picture ADD CONSTRAINT user_picture_picture_id_picture_id FOREIGN KEY (picture_id) REFERENCES picture(id);
